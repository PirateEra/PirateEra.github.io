---
layout: default
---

{% assign project = site.data.projects | where: "id", page.project_id | first %}

<div class="project-page">

  <div class="project-header">
    {% if project.logo %}
      <img src="{{ project.logo }}" alt="{{ project.title }}" class="project-logo">
    {% else %}
      <h1>{{ project.title }}</h1>
    {% endif %}
    <p class="project-subtitle">{{ project.description }}</p>
  </div>

  <div class="project-about">
    <h2>About {{ project.title }}</h2>
    <p class="project-tools">{{ project.tools }}</p>
    <p>{{ project.about }}</p>
  </div>

  {% if project.media %}
    <div class="project-media">
      {% for media in project.media %}
        {% if media contains 'youtube.com/watch?v=' %}
          {% assign embed_url = media | replace: 'watch?v=', 'embed/' %}
          <iframe src="{{ embed_url }}" frameborder="0" allowfullscreen></iframe>
        {% elsif media contains 'youtu.be/' %}
          {% assign embed_url = media | replace: 'youtu.be/', 'youtube.com/embed/' %}
          <iframe src="{{ embed_url }}" frameborder="0" allowfullscreen></iframe>
        {% else %}
          <img src="{{ media }}" alt="{{ project.title }} media">
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}

  {% if project.presentation_pdf %}
    <div class="project-pdf-slides">
      <h2>{{ project.presentation_title | default: "Presentation" }}</h2>
      <canvas id="pdf-canvas"></canvas>
      <div class="pdf-controls">
        <button id="pdf-prev">&#8592; Prev</button>
        <span id="pdf-page-info">1 / 1</span>
        <button id="pdf-next">Next &#8594;</button>
      </div>
      <p>
        <a href="{{ project.presentation_pdf }}" target="_blank" class="pdf-download-btn">Download PDF</a>
      </p>
    </div>
  {% endif %}


  {% if project.project_pdf %}
    <div class="project-pdf">
      <h2 style="margin-bottom: 1rem;">{{ project.project_pdf_title | default: "Research Report" }}</h2>
      <iframe src="{{ project.project_pdf }}" width="100%" height="600px""></iframe>
      <p style="margin-top: 1rem;">
        <a href="{{ project.project_pdf }}" download class="pdf-download-btn">
          Download PDF
        </a>
      </p>
    </div>
  {% endif %}

  <h2>My Contributions</h2>
  {% for contribution in project.contributions %}
    {% assign category = contribution[0] %}
    {% assign items = contribution[1] %}
    <h3>{{ category }}</h3>
    <ul>
      {% for item in items %}
        <li>{{ item }}</li>
      {% endfor %}
    </ul>
  {% endfor %}

  {% if project.code_snippets %}
    <div class="code-snippets">
      <h2>{{ project.code_snippets_title }}</h2>
      {% for snippet in project.code_snippets %}
        <div class="snippet">
          <h3 class="snippet-title">{{ snippet.title }}</h3>
          <div class="snippet-content">
            <button class="snippet-prev">&#8592;</button>
            <button class="snippet-next">&#8594;</button>
            {{ snippet.content | markdownify }}
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.313/pdf.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const url = "{{ project.presentation_pdf }}";
  if (!url) return;
  let pdfDoc = null, pageNum = 1;

  const canvas = document.getElementById('pdf-canvas');
  const ctx = canvas.getContext('2d');
  const pageInfo = document.getElementById('pdf-page-info');

  const renderPage = num => {
    pdfDoc.getPage(num).then(page => {
      const viewport = page.getViewport({ scale: 1.5 });
      canvas.height = viewport.height;
      canvas.width = viewport.width;

      const renderCtx = { canvasContext: ctx, viewport: viewport };
      page.render(renderCtx);

      pageInfo.textContent = `${num} / ${pdfDoc.numPages}`;
    });
  };

  pdfjsLib.getDocument(url).promise.then(doc => {
    pdfDoc = doc;
    renderPage(pageNum);
  });

  document.getElementById('pdf-prev').addEventListener('click', () => {
    if (pageNum <= 1) return;
    pageNum--;
    renderPage(pageNum);
  });

  document.getElementById('pdf-next').addEventListener('click', () => {
    if (pageNum >= pdfDoc.numPages) return;
    pageNum++;
    renderPage(pageNum);
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const snippets = document.querySelectorAll(".snippet");
  let index = 0;

  snippets.forEach((s, i) => {
    s.style.display = i === 0 ? 'block' : 'none';
  });

  const showSnippet = (i) => {
    snippets.forEach((snip, idx) => {
      snip.style.display = idx === i ? 'block' : 'none';
    });
  };

  snippets.forEach((snippet) => {
    const prevBtn = snippet.querySelector(".snippet-prev");
    const nextBtn = snippet.querySelector(".snippet-next");

    prevBtn?.addEventListener("click", () => {
      index = (index - 1 + snippets.length) % snippets.length;
      showSnippet(index);
    });

    nextBtn?.addEventListener("click", () => {
      index = (index + 1) % snippets.length;
      showSnippet(index);
    });
  });
});
</script>


